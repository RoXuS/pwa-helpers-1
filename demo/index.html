<html>
  <head>
    <title>PWA Helpers</title>
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#0077ff"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      * {  
        font-family: Helvetica, sans-serif;
      }

      body {
        overflow: scroll;
        -webkit-overflow-scrolling: touch;
        background-color: #ededed;
      }

      button {
        background-color: #217ff9;
        color: white;
        padding: 15px;
        font-weight: bold;
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <script>
      if (!('serviceWorker' in navigator)) {
        document.body.innerHTML = 'service worker is not supported in this browser :(';
      };
    </script>
    <h1><code>pwa-install-button</code></h1>
    <b>This demo will not work when embedded in an iframe. Make sure to check out the demo <a href="https://unpkg.com/pwa-helper-components@0.0.9/demo/index.html">here</a></a></b>
    <p>Wait for it... (it may take some time for the <code>beforeinstallprompt</code> event to be fired)</p>
    <br>
    <h2>Using the default slot fallback button:</h2>
    <pwa-install-button></pwa-install-button>

    <h2>Using a custom button:</h2>
    <pwa-install-button>
      <button>Install me! :-)</button>
    </pwa-install-button>

    <h2>Using a web component:</h2>
    <pwa-install-button>
      <mwc-button raised label="Install me!"></mwc-button>
    </pwa-install-button>

    <script type="module" src="https://unpkg.com/pwa-helper-components@0.0.9/pwa-install-button.js?module"></script>
    <script type="module" src="https://unpkg.com/@material/mwc-button@0.10.0/mwc-button.js?module"></script>
    <script>
      const button = document.querySelector('pwa-install-button');
      button.addEventListener('pwa-installable', ({detail}) => {
        console.log(`Pwa installable: ${detail}!`);
      });

      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('./sw.js').then(() => {
            console.log('Service worker registered :-)');
          }).catch(() => {
            console.log('Service worker not registered :-(');
          });
        });
      };
    </script>
  </body>
</html>
